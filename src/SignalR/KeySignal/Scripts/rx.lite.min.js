(function(n,t){function nt(){}function d(n){return n}function fu(n,t){return di(n,t)}function eu(n,t){return n-t}function ou(n){throw n;}function h(){if(this.isDisposed)throw new Error(hu);}function ki(n){return typeof n.toString!="function"&&typeof(n+"")=="string"}function ei(n){return n&&typeof n=="object"?rt.call(n)==yt:!1}function bt(n){return typeof n=="function"}function oi(n,t,i,r){var o,v,y,f,l,a,h,c,s,u,w,p,e;if(n===t)return n!==0||1/n==1/t;if(v=typeof n,y=typeof t,n===n&&!(n&&bi[v])&&!(t&&bi[y]))return!1;if(n==null||t==null)return n===t;if(f=rt.call(n),l=rt.call(t),f==yt&&(f=pt),l==yt&&(l=pt),f!=l)return!1;switch(f){case lu:case au:return+n==+t;case yu:return n!=+n?t!=+t:n==0?1/n==1/t:n==+t;case pu:case wu:return n==String(t)}if(a=f==cu,!a&&(f!=pt||!fi&&(ki(n)||ki(t))||(h=!ui&&ei(n)?Object:n.constructor,c=!ui&&ei(t)?Object:t.constructor,h!=c&&!(bt(h)&&h instanceof h&&bt(c)&&c instanceof c))))return!1;for(s=i.length;s--;)if(i[s]==n)return r[s]==t;if(u=0,o=!0,i.push(n),r.push(t),a){for(s=n.length,u=t.length,o=u==n.length;u--;)if(w=s,p=t[u],!(o=oi(n[u],p,i,r)))break;return o}for(e in t)if(wt.call(t,e))return u++,wt.call(n,e)&&oi(n[e],t[e],i,r);if(o)for(e in n)if(wt.call(n,e))return--u>-1;return i.pop(),r.pop(),o}function si(n,t){return n.length===1&&Array.isArray(n[t])?n[t]:c.call(n)}function ut(n,t){for(var r=new Array(n),i=0;i<n;i++)r[i]=t();return r}function ku(n,t){return new r(function(i){var u=new o,r=new l;return r.setDisposable(u),u.setDisposable(n.subscribe(i.onNext.bind(i),function(n){var u,f;try{f=t(n)}catch(e){i.onError(e);return}u=new o;r.setDisposable(u);u.setDisposable(f.subscribe(i))},i.onCompleted.bind(i))),r})}function du(n,t){var i=this;return new r(function(r){var u=0,f=n.length;return i.subscribe(function(i){if(u<f){var o=n[u++],e;try{e=t(i,o)}catch(s){r.onError(s);return}r.onNext(e)}else r.onCompleted()},r.onError.bind(r),r.onCompleted.bind(r))})}function pr(n){return this.select(n).mergeObservable()}function gu(n,t,i){return n.addListener?(n.addListener(t,i),a(function(){n.removeListener(t,i)})):n.addEventListener?(n.addEventListener(t,i,!1),a(function(){n.removeEventListener(t,i,!1)})):void 0}function wr(n,t,i){var u=new e,r,f;if(n&&n.length)for(r=0,f=n.length;r<f;r++)u.add(wr(n[r],t,i));else n&&u.add(gu(n,t,i));return u}function nf(n,t){return new r(function(i){return t.scheduleWithAbsolute(n,function(){i.onNext(0);i.onCompleted()})})}function kr(n,t,i){var u=nr(t);return new r(function(t){var f=0,r=n;return i.scheduleRecursiveWithAbsolute(r,function(n){var e;u>0&&(e=i.now(),r=r+u,r<=e&&(r=e+u));t.onNext(f++);n(r)})})}function tf(n,t){var i=nr(n);return new r(function(n){return t.scheduleWithRelative(i,function(){n.onNext(0);n.onCompleted()})})}function dr(n,t,i){return n===t?new r(function(n){return i.schedulePeriodicWithState(0,t,function(t){n.onNext(t);return t+1})}):pi(function(){return kr(i.now()+n,t,i)})}function tu(n,t){var i=this;return new r(function(r){var s=!1,c=new l,f=null,u=[],h=!1,a;return a=i.materialize().timestamp(t).subscribe(function(i){var e,l;if(i.value.kind==="E"?(u=[],u.push(i),f=i.value.exception,l=!h):(u.push({value:i.value,timestamp:i.timestamp+n}),l=!s,s=!0),l)if(f!==null)r.onError(f);else e=new o,c.setDisposable(e),e.setDisposable(t.scheduleRecursiveWithRelative(n,function(n){var e,o,i,c;if(f===null){h=!0;do i=null,u.length>0&&u[0].timestamp-t.now()<=0&&(i=u.shift().value),i!==null&&i.accept(r);while(i!==null);if(c=!1,o=0,u.length>0?(c=!0,o=Math.max(0,u[0].timestamp-t.now())):s=!1,e=f,h=!1,e!==null)r.onError(e);else c&&n(o)}}))}),new e(a,c)})}function rf(n,t){var i=this;return pi(function(){var r=n-t.now();return tu.call(i,r,t)})}function iu(n,t){return new r(function(i){function o(){if(r){r=!1;i.onNext(f)}u&&i.onCompleted()}var u,f,r;return new e(n.subscribe(function(n){r=!0;f=n},i.onError.bind(i),function(){u=!0}),t.subscribe(o,i.onError.bind(i),o))})}var at=typeof exports=="object"&&exports,ef=typeof module=="object"&&module&&module.exports==at&&module,ri=typeof global=="object"&&global,f,vt,di,c,ci,st,b,e,tt,ht,gi,ft,or,hr,cr,ti,lr,ar,vr,yr,br,gr,nu;ri.global===ri&&(n=ri);f={Internals:{}};vt=Date.now;var su="Sequence contains no elements.",wi="Argument out of range",hu="Object has been disposed";var bi={boolean:!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},yt="[object Arguments]",cu="[object Array]",lu="[object Boolean]",au="[object Date]",vu="[object Function]",yu="[object Number]",pt="[object Object]",pu="[object RegExp]",wu="[object String]",rt=Object.prototype.toString,wt=Object.prototype.hasOwnProperty,ui=rt.call(arguments)==yt,fi;try{fi=!(rt.call(document)==pt&&!({toString:0}+""))}catch(sf){fi=!0}ui||(ei=function(n){return n&&typeof n=="object"?wt.call(n,"callee"):!1});bt(/x/)&&(bt=function(n){return typeof n=="function"&&rt.call(n)==vu});di=f.Internals.isEqual=function(n,t){return oi(n,t,[],[])};c=Array.prototype.slice;var hf={}.hasOwnProperty,v=this.inherits=f.Internals.inherits=function(n,t){function i(){this.constructor=n}i.prototype=t.prototype;n.prototype=new i},ot=f.Internals.addProperties=function(n){for(var i,r,u=c.call(arguments,1),t=0,f=u.length;t<f;t++){i=u[t];for(r in i)n[r]=i[r]}},hi=f.Internals.addRef=function(n,t){return new r(function(i){return new e(t.getDisposable(),n.subscribe(i))})};ci=function(n,t){this.id=n;this.value=t};ci.prototype.compareTo=function(n){var t=this.value.compareTo(n.value);return t===0&&(t=this.id-n.id),t};st=f.Internals.PriorityQueue=function(n){this.items=new Array(n);this.length=0};b=st.prototype;b.isHigherPriority=function(n,t){return this.items[n].compareTo(this.items[t])<0};b.percolate=function(n){var t,i;n>=this.length||n<0||(t=n-1>>1,t<0||t===n)||this.isHigherPriority(n,t)&&(i=this.items[n],this.items[n]=this.items[t],this.items[t]=i,this.percolate(t))};b.heapify=function(n){var f;if(n===t&&(n=0),!(n>=this.length)&&!(n<0)){var r=2*n+1,u=2*n+2,i=n;r<this.length&&this.isHigherPriority(r,i)&&(i=r);u<this.length&&this.isHigherPriority(u,i)&&(i=u);i!==n&&(f=this.items[n],this.items[n]=this.items[i],this.items[i]=f,this.heapify(i))}};b.peek=function(){return this.items[0].value};b.removeAt=function(n){this.items[n]=this.items[--this.length];delete this.items[this.length];this.heapify()};b.dequeue=function(){var n=this.peek();return this.removeAt(0),n};b.enqueue=function(n){var t=this.length++;this.items[t]=new ci(st.count++,n);this.percolate(t)};b.remove=function(n){for(var t=0;t<this.length;t++)if(this.items[t].value===n)return this.removeAt(t),!0;return!1};st.count=0;e=f.CompositeDisposable=function(){this.disposables=si(arguments,0);this.isDisposed=!1;this.length=this.disposables.length};tt=e.prototype;tt.add=function(n){this.isDisposed?n.dispose():(this.disposables.push(n),this.length++)};tt.remove=function(n){var i=!1,t;return this.isDisposed||(t=this.disposables.indexOf(n),t!==-1&&(i=!0,this.disposables.splice(t,1),this.length--,n.dispose())),i};tt.dispose=function(){var t,n,i;if(!this.isDisposed)for(this.isDisposed=!0,t=this.disposables.slice(0),this.disposables=[],this.length=0,n=0,i=t.length;n<i;n++)t[n].dispose()};tt.clear=function(){var t=this.disposables.slice(0),n,i;for(this.disposables=[],this.length=0,n=0,i=t.length;n<i;n++)t[n].dispose()};tt.contains=function(n){return this.disposables.indexOf(n)!==-1};tt.toArray=function(){return this.disposables.slice(0)};ht=f.Disposable=function(n){this.isDisposed=!1;this.action=n||nt};ht.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var a=ht.create=function(n){return new ht(n)},y=ht.empty={dispose:nt},kt=f.BooleanDisposable=function(){this.isDisposed=!1;this.current=null};f.SingleAssignmentDisposable=f.SerialDisposable=kt;var dt=kt.prototype,o=kt,l=kt;dt.getDisposable=function(){return this.current};dt.setDisposable=function(n){var i=this.isDisposed,t;i||(t=this.current,this.current=n);t&&t.dispose();i&&n&&n.dispose()};dt.disposable=function(n){if(n)this.setDisposable(n);else return this.getDisposable()};dt.dispose=function(){var n;this.isDisposed||(this.isDisposed=!0,n=this.current,this.current=null);n&&n.dispose()};gi=f.RefCountDisposable=function(){function t(n){this.disposable=n;this.disposable.count++;this.isInnerDisposed=!1}function n(n){this.underlyingDisposable=n;this.isDisposed=!1;this.isPrimaryDisposed=!1;this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,this.disposable.count===0&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},n.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,this.count===0&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},n.prototype.getDisposable=function(){return this.isDisposed?y:new t(this)},n}();ft=f.Internals.ScheduledItem=function(n,t,i,r,u){this.scheduler=n;this.state=t;this.action=i;this.dueTime=r;this.comparer=u||eu;this.disposable=new o};ft.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())};ft.prototype.compareTo=function(n){return this.comparer(this.dueTime,n.dueTime)};ft.prototype.isCancelled=function(){return this.disposable.isDisposed};ft.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var p=f.Scheduler=function(){function i(n,t,i,r){this.now=n;this._schedule=t;this._scheduleRelative=i;this._scheduleAbsolute=r}function f(n,t){var u=t.first,f=t.second,i=new e,r=function(t){f(t,function(t){var u=!1,f=!1,e=n.scheduleWithState(t,function(n,t){return u?i.remove(e):f=!0,r(t),y});f||(i.add(e),u=!0)})};return r(u),i}function u(n,t,i){var f=t.first,o=t.second,r=new e,u=function(t){o(t,function(t,f){var e=!1,o=!1,s=n[i].call(n,t,f,function(n,t){return e?r.remove(s):o=!0,u(t),y});o||(r.add(s),e=!0)})};return u(f),r}function r(n,t){return t(),y}var t=i.prototype;return t.schedulePeriodic=function(n,t){return this.schedulePeriodicWithState(null,n,function(){t()})},t.schedulePeriodicWithState=function(t,i,r){var u=t,f=n.setInterval(function(){u=r(u)},i);return a(function(){n.clearInterval(f)})},t.schedule=function(n){return this._schedule(n,r)},t.scheduleWithState=function(n,t){return this._schedule(n,t)},t.scheduleWithRelative=function(n,t){return this._scheduleRelative(t,n,r)},t.scheduleWithRelativeAndState=function(n,t,i){return this._scheduleRelative(n,t,i)},t.scheduleWithAbsolute=function(n,t){return this._scheduleAbsolute(t,n,r)},t.scheduleWithAbsoluteAndState=function(n,t,i){return this._scheduleAbsolute(n,t,i)},t.scheduleRecursive=function(n){return this.scheduleRecursiveWithState(n,function(n,t){n(function(){t(n)})})},t.scheduleRecursiveWithState=function(n,t){return this.scheduleWithState({first:n,second:t},function(n,t){return f(n,t)})},t.scheduleRecursiveWithRelative=function(n,t){return this.scheduleRecursiveWithRelativeAndState(t,n,function(n,t){n(function(i){t(n,i)})})},t.scheduleRecursiveWithRelativeAndState=function(n,t,i){return this._scheduleRelative({first:n,second:i},t,function(n,t){return u(n,t,"scheduleWithRelativeAndState")})},t.scheduleRecursiveWithAbsolute=function(n,t){return this.scheduleRecursiveWithAbsoluteAndState(t,n,function(n,t){n(function(i){t(n,i)})})},t.scheduleRecursiveWithAbsoluteAndState=function(n,t,i){return this._scheduleAbsolute({first:n,second:i},t,function(n,t){return u(n,t,"scheduleWithAbsoluteAndState")})},i.now=vt,i.normalize=function(n){return n<0&&(n=0),n},i}(),nr=p.normalize,g=p.currentThread=p.immediate=function(){function i(){n=new st(4)}function r(n,t){return this.scheduleWithRelativeAndState(n,0,t)}function u(t,r,u){var o=this.now()+p.normalize(r),f=new ft(this,t,u,o),e;if(n)n.enqueue(f);else{e=new i;try{n.enqueue(f);e.run()}catch(s){throw s;}finally{e.dispose()}}return f.disposable}function f(n,t,i){return this.scheduleWithRelativeAndState(n,t-this.now(),i)}var n,t;return i.prototype.dispose=function(){n=null},i.prototype.run=function(){for(var t;n.length>0;)if(t=n.dequeue(),!t.isCancelled()){while(t.dueTime-p.now()>0);t.isCancelled()||t.invoke()}},t=new p(vt,r,u,f),t.scheduleRequired=function(){return n===null},t.ensureTrampoline=function(t){return n===null?this.schedule(t):t()},t}(),k=g,cf=f.Internals.SchedulePeriodicRecursive=function(){function t(n,t){t(0,this._period);try{this._state=this._action(this._state)}catch(i){this._cancel.dispose();throw i;}}function n(n,t,i,r){this._scheduler=n;this._state=t;this._period=i;this._action=r}return n.prototype.start=function(){var n=new o;return this._cancel=n,n.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,t.bind(this))),n},n}(),it,li=nt;(function(){function e(){if(!n.postMessage||n.importScripts)return!1;var t=!1,i=n.onmessage;return n.onmessage=function(){t=!0},n.postMessage("","*"),n.onmessage=i,t}if(typeof n.setImmediate=="function")it=n.setImmediate,li=clearImmediate;else if(typeof process!="undefined"&&{}.toString.call(process)==="[object process]")it=process.nextTick;else if(e()){var t="ms.rx.schedule"+Math.random(),i={},o=0;function u(n){if(typeof n.data=="string"&&n.data.substring(0,t.length)===t){var r=n.data.substring(t.length),u=i[r];u();delete i[r]}}n.addEventListener?n.addEventListener("message",u,!1):n.attachEvent("onmessage",u,!1);it=function(r){var u=o++;i[u]=r;n.postMessage(t+u,"*")}}else if(!n.MessageChannel)"document"in n&&"onreadystatechange"in n.document.createElement("script")?it=function(t){var i=n.document.createElement("script");i.onreadystatechange=function(){t();i.onreadystatechange=null;i.parentNode.removeChild(i);i=null};n.document.documentElement.appendChild(i)}:(it=function(t){return n.setTimeout(t,0)},li=n.clearTimeout);else{var f=new n.MessageChannel,r={},s=0;f.port1.onmessage=function(n){var t=n.data,i=r[t];i();delete r[t]};it=function(n){var t=s++;r[t]=n;f.port2.postMessage(t)}}})();var s=p.timeout=function(){function t(n,t){var r=this,i=new o,u=it(function(){i.isDisposed||i.setDisposable(t(r,n))});return new e(i,a(function(){li(u)}))}function i(t,i,r){var f=this,s=p.normalize(i),u,h;return s===0?f.scheduleWithState(t,r):(u=new o,h=n.setTimeout(function(){u.isDisposed||u.setDisposable(r(f,t))},s),new e(u,a(function(){n.clearTimeout(h)})))}function r(n,t,i){return this.scheduleWithRelativeAndState(n,t-this.now(),i)}return new p(vt,t,i,r)}(),et=f.Notification=function(){function n(n,t){this.hasValue=t==null?!1:t;this.kind=n}var t=n.prototype;return t.accept=function(n,t,i){return arguments.length===1&&typeof n=="object"?this._acceptObservable(n):this._accept(n,t,i)},t.toObservable=function(n){var t=this;return n||(n=k),new r(function(i){return n.schedule(function(){t._acceptObservable(i);t.kind==="N"&&i.onCompleted()})})},n}(),tr=et.createOnNext=function(){function n(n){return n(this.value)}function t(n){return n.onNext(this.value)}function i(){return"OnNext("+this.value+")"}return function(r){var u=new et("N",!0);return u.value=r,u._accept=n,u._acceptObservable=t,u.toString=i,u}}(),ir=et.createOnError=function(){function n(n,t){return t(this.exception)}function t(n){return n.onError(this.exception)}function i(){return"OnError("+this.exception+")"}return function(r){var u=new et("E");return u.exception=r,u._accept=n,u._acceptObservable=t,u.toString=i,u}}(),rr=et.createOnCompleted=function(){function n(n,t,i){return i()}function t(n){return n.onCompleted()}function i(){return"OnCompleted()"}return function(){var r=new et("C");return r._accept=n,r._acceptObservable=t,r.toString=i,r}}(),ur=f.Internals.Enumerator=function(n,t,i){this.moveNext=n;this.getCurrent=t;this.dispose=i},fr=ur.create=function(n,t,i){var r=!1;return i||(i=nt),new ur(function(){if(r)return!1;var t=n();return t||(r=!0,i()),t},function(){return t()},function(){r||(i(),r=!0)})},gt=f.Internals.Enumerable=function(){function n(n){this.getEnumerator=n}return n.prototype.concat=function(){var n=this;return new r(function(t){var i=n.getEnumerator(),r=!1,u=new l,f=k.scheduleRecursive(function(n){var h,f,e=!1,s;if(!r){try{e=i.moveNext();e?h=i.getCurrent():i.dispose()}catch(c){f=c;i.dispose()}if(f){t.onError(f);return}if(!e){t.onCompleted();return}s=new o;u.setDisposable(s);s.setDisposable(h.subscribe(t.onNext.bind(t),t.onError.bind(t),function(){n()}))}});return new e(u,f,a(function(){r=!0;i.dispose()}))})},n.prototype.catchException=function(){var n=this;return new r(function(t){var r=n.getEnumerator(),u=!1,i,f=new l,s=k.scheduleRecursive(function(n){var c,s,e,h;if(e=!1,!u){try{e=r.moveNext();e&&(c=r.getCurrent())}catch(l){s=l}if(s){t.onError(s);return}if(!e){if(i)t.onError(i);else t.onCompleted();return}h=new o;f.setDisposable(h);h.setDisposable(c.subscribe(t.onNext.bind(t),function(t){i=t;n()},t.onCompleted.bind(t)))}});return new e(f,s,a(function(){u=!0}))})},n}(),er=gt.repeat=function(n,i){return i===t&&(i=-1),new gt(function(){var r,t=i;return fr(function(){return t===0?!1:(t>0&&t--,r=n,!0)},function(){return r})})},ai=gt.forEach=function(n,t){return t||(t=d),new gt(function(){var r,i=-1;return fr(function(){return++i<n.length?(r=t(n[i],i),!0):!1},function(){return r})})},w=f.Observer=function(){};w.prototype.toNotifier=function(){var n=this;return function(t){return t.accept(n)}};w.prototype.asObserver=function(){return new yi(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))};or=w.create=function(n,t,i){return n||(n=nt),t||(t=ou),i||(i=nt),new yi(n,t,i)};w.fromNotifier=function(n){return new yi(function(t){return n(tr(t))},function(t){return n(ir(t))},function(){return n(rr())})};var vi=f.Internals.AbstractObserver=function(n){function t(){this.isStopped=!1;n.call(this)}return v(t,n),t.prototype.onNext=function(n){this.isStopped||this.next(n)},t.prototype.onError=function(n){this.isStopped||(this.isStopped=!0,this.error(n))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(n){return this.isStopped?!1:(this.isStopped=!0,this.error(n),!0)},t}(w),yi=f.AnonymousObserver=function(n){function t(t,i,r){n.call(this);this._onNext=t;this._onError=i;this._onCompleted=r}return v(t,n),t.prototype.next=function(n){this._onNext(n)},t.prototype.error=function(n){this._onError(n)},t.prototype.completed=function(){this._onCompleted()},t}(vi),i,u=f.Observable=function(){function n(n){this._subscribe=n}return i=n.prototype,i.finalValue=function(){var n=this;return new r(function(t){var i=!1,r;return n.subscribe(function(n){i=!0;r=n},t.onError.bind(t),function(){if(i){t.onNext(r);t.onCompleted()}else t.onError(new Error(su))})})},i.subscribe=i.forEach=function(n,t,i){var r;return r=typeof n=="object"?n:or(n,t,i),this._subscribe(r)},i.toArray=function(){function n(n,t){var i=n.slice(0);return i.push(t),i}return this.scan([],n).startWith([]).finalValue()},n}(),bu=f.Internals.ScheduledObserver=function(n){function t(t,i){n.call(this);this.scheduler=t;this.observer=i;this.isAcquired=!1;this.hasFaulted=!1;this.queue=[];this.disposable=new l}return v(t,n),t.prototype.next=function(n){var t=this;this.queue.push(function(){t.observer.onNext(n)})},t.prototype.error=function(n){var t=this;this.queue.push(function(){t.observer.onError(n)})},t.prototype.completed=function(){var n=this;this.queue.push(function(){n.observer.onCompleted()})},t.prototype.ensureActive=function(){var t=!1,n=this;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0);t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(t){var i;if(n.queue.length>0)i=n.queue.shift();else{n.isAcquired=!1;return}try{i()}catch(r){n.queue=[];n.hasFaulted=!0;throw r;}t()}))},t.prototype.dispose=function(){n.prototype.dispose.call(this);this.disposable.dispose()},t}(vi);u.create=u.createWithDisposable=function(n){return new r(n)};var pi=u.defer=function(n){return new r(function(t){var i;try{i=n()}catch(r){return ti(r).subscribe(t)}return i.subscribe(t)})},sr=u.empty=function(n){return n||(n=k),new r(function(t){return n.schedule(function(){t.onCompleted()})})},ni=u.fromArray=function(n,t){return t||(t=g),new r(function(i){var r=0;return t.scheduleRecursive(function(t){if(r<n.length){i.onNext(n[r++]);t()}else i.onCompleted()})})};u.generate=function(n,t,i,u,f){return f||(f=g),new r(function(r){var o=!0,e=n;return f.scheduleRecursive(function(n){var f,s;try{o?o=!1:e=i(e);f=t(e);f&&(s=u(e))}catch(h){r.onError(h);return}if(f){r.onNext(s);n()}else r.onCompleted()})})};hr=u.never=function(){return new r(function(){return y})};u.range=function(n,t,i){return i||(i=g),new r(function(r){return i.scheduleRecursiveWithState(0,function(i,u){if(i<t){r.onNext(n+i);u(i+1)}else r.onCompleted()})})};u.repeat=function(n,t,i){return i||(i=g),t==null&&(t=-1),cr(n,i).repeat(t)};cr=u["return"]=u.returnValue=function(n,t){return t||(t=k),new r(function(i){return t.schedule(function(){i.onNext(n);i.onCompleted()})})};ti=u["throw"]=u.throwException=function(n,t){return t||(t=k),new r(function(i){return t.schedule(function(){i.onError(n)})})};i["catch"]=i.catchException=function(n){return typeof n=="function"?ku(this,n):lr([this,n])};lr=u.catchException=u["catch"]=function(){var n=si(arguments,0);return ai(n).catchException()};i.combineLatest=function(){var n=c.call(arguments);return Array.isArray(n[0])?n[0].unshift(this):n.unshift(this),ar.apply(this,n)};ar=u.combineLatest=function(){var n=c.call(arguments),t=n.pop();return Array.isArray(n[0])&&(n=n[0]),new r(function(i){function v(n){var r;if(c[n]=!0,l||(l=c.every(d))){try{r=t.apply(null,a)}catch(f){i.onError(f);return}i.onNext(r)}else u.filter(function(t,i){return i!==n}).every(d)&&i.onCompleted()}function y(n){u[n]=!0;u.every(d)&&i.onCompleted()}for(var h=function(){return!1},r=n.length,c=ut(r,h),l=!1,u=ut(r,h),a=new Array(r),f=new Array(r),s=0;s<r;s++)(function(t){f[t]=new o;f[t].setDisposable(n[t].subscribe(function(n){a[t]=n;v(t)},i.onError.bind(i),function(){y(t)}))})(s);return new e(f)})};i.concat=function(){var n=c.call(arguments,0);return n.unshift(this),vr.apply(this,n)};vr=u.concat=function(){var n=si(arguments,0);return ai(n).concat()};i.concatObservable=i.concatAll=function(){return this.merge(1)};i.merge=function(n){if(typeof n!="number")return yr(this,n);var t=this;return new r(function(i){var r=0,u=new e,s=!1,f=[],h=function(n){var t=new o;u.add(t);t.setDisposable(n.subscribe(i.onNext.bind(i),i.onError.bind(i),function(){var n;u.remove(t);f.length>0?(n=f.shift(),h(n)):(r--,s&&r===0&&i.onCompleted())}))};return u.add(t.subscribe(function(t){r<n?(r++,h(t)):f.push(t)},i.onError.bind(i),function(){s=!0;r===0&&i.onCompleted()})),u})};yr=u.merge=function(){var t,n;return arguments[0]?arguments[0].now?(t=arguments[0],n=c.call(arguments,1)):(t=k,n=c.call(arguments,0)):(t=k,n=c.call(arguments,1)),Array.isArray(n[0])&&(n=n[0]),ni(n,t).mergeObservable()};i.mergeObservable=i.mergeAll=function(){var n=this;return new r(function(t){var i=new e,r=!1,u=new o;return i.add(u),u.setDisposable(n.subscribe(function(n){var u=new o;i.add(u);u.setDisposable(n.subscribe(function(n){t.onNext(n)},t.onError.bind(t),function(){i.remove(u);r&&i.length===1&&t.onCompleted()}))},t.onError.bind(t),function(){r=!0;i.length===1&&t.onCompleted()})),i})};i.skipUntil=function(n){var t=this;return new r(function(i){var u=!1,f=new e(t.subscribe(function(n){if(u)i.onNext(n)},i.onError.bind(i),function(){u&&i.onCompleted()})),r=new o;return f.add(r),r.setDisposable(n.subscribe(function(){u=!0;r.dispose()},i.onError.bind(i),function(){r.dispose()})),f})};i["switch"]=i.switchLatest=function(){var n=this;return new r(function(t){var r=!1,u=new l,f=!1,i=0,s=n.subscribe(function(n){var s=new o,e=++i;r=!0;u.setDisposable(s);s.setDisposable(n.subscribe(function(n){if(i===e)t.onNext(n)},function(n){if(i===e)t.onError(n)},function(){i===e&&(r=!1,f&&t.onCompleted())}))},t.onError.bind(t),function(){f=!0;r||t.onCompleted()});return new e(s,u)})};i.takeUntil=function(n){var t=this;return new r(function(i){return new e(t.subscribe(i),n.subscribe(i.onCompleted.bind(i),i.onError.bind(i),nt))})};i.zip=function(){if(Array.isArray(arguments[0]))return du.apply(this,arguments);var t=this,n=c.call(arguments),i=n.pop();return n.unshift(t),new r(function(r){function a(n){s[n]=!0;s.every(function(n){return n})&&r.onCompleted()}for(var u=n.length,f=ut(u,function(){return[]}),s=ut(u,function(){return!1}),l=function(n){var u,e;if(f.every(function(n){return n.length>0})){try{e=f.map(function(n){return n.shift()});u=i.apply(t,e)}catch(o){r.onError(o);return}r.onNext(u)}else s.filter(function(t,i){return i!==n}).every(d)&&r.onCompleted()},h=new Array(u),c=0;c<u;c++)(function(t){h[t]=new o;h[t].setDisposable(n[t].subscribe(function(n){f[t].push(n);l(t)},r.onError.bind(r),function(){a(t)}))})(c);return new e(h)})};u.zip=function(){var n=c.call(arguments,0),t=n.shift();return t.zip.apply(t,n)};u.zipArray=function(){var n=c.call(arguments);return new r(function(t){function c(n){if(i.every(function(n){return n.length>0})){var r=i.map(function(n){return n.shift()});t.onNext(r)}else if(u.filter(function(t,i){return i!==n}).every(d)){t.onCompleted();return}}function l(n){if(u[n]=!0,u.every(d)){t.onCompleted();return}}for(var h,r=n.length,i=ut(r,function(){return[]}),u=ut(r,function(){return!1}),f=new Array(r),s=0;s<r;s++)(function(r){f[r]=new o;f[r].setDisposable(n[r].subscribe(function(n){i[r].push(n);c(r)},t.onError.bind(t),function(){l(r)}))})(s);return h=new e(f),h.add(a(function(){for(var n=0,t=i.length;n<t;n++)i[n]=[]})),h})};i.asObservable=function(){var n=this;return new r(function(t){return n.subscribe(t)})};i.dematerialize=function(){var n=this;return new r(function(t){return n.subscribe(function(n){return n.accept(t)},t.onError.bind(t),t.onCompleted.bind(t))})};i.distinctUntilChanged=function(n,t){var i=this;return n||(n=d),t||(t=fu),new r(function(r){var u=!1,f;return i.subscribe(function(i){var o=!1,e;try{e=n(i)}catch(s){r.onError(s);return}if(u)try{o=t(f,e)}catch(s){r.onError(s);return}if(!u||!o){u=!0;f=e;r.onNext(i)}},r.onError.bind(r),r.onCompleted.bind(r))})};i["do"]=i.doAction=function(n,t,i){var f=this,u;return typeof n=="function"?u=n:(u=n.onNext.bind(n),t=n.onError.bind(n),i=n.onCompleted.bind(n)),new r(function(n){return f.subscribe(function(t){try{u(t)}catch(i){n.onError(i)}n.onNext(t)},function(i){if(t){try{t(i)}catch(r){n.onError(r)}n.onError(i)}else n.onError(i)},function(){if(i){try{i()}catch(t){n.onError(t)}n.onCompleted()}else n.onCompleted()})})};i["finally"]=i.finallyAction=function(n){var t=this;return new r(function(i){var r=t.subscribe(i);return a(function(){try{r.dispose()}catch(t){throw t;}finally{n()}})})};i.materialize=function(){var n=this;return new r(function(t){return n.subscribe(function(n){t.onNext(tr(n))},function(n){t.onNext(ir(n));t.onCompleted()},function(){t.onNext(rr());t.onCompleted()})})};i.repeat=function(n){return er(this,n).concat()};i.retry=function(n){return er(this,n).catchException()};i.scan=function(){var t=!1,i,n,u=this;return arguments.length===2?(t=!0,i=arguments[0],n=arguments[1]):n=arguments[0],new r(function(r){var o,f,e;return u.subscribe(function(u){try{e||(e=!0);o?f=n(f,u):(f=t?n(i,u):u,o=!0)}catch(s){r.onError(s);return}r.onNext(f)},r.onError.bind(r),function(){if(!e&&t)r.onNext(i);r.onCompleted()})})};i.skipLast=function(n){var t=this;return new r(function(i){var r=[];return t.subscribe(function(t){if(r.push(t),r.length>n)i.onNext(r.shift())},i.onError.bind(i),i.onCompleted.bind(i))})};i.startWith=function(){var t,n,i=0;return!!arguments.length&&"now"in Object(arguments[0])?(n=arguments[0],i=1):n=k,t=c.call(arguments,i),ai([ni(t,n),this]).concat()};i.takeLast=function(n,t){return this.takeLastBuffer(n).selectMany(function(n){return ni(n,t)})};i.takeLastBuffer=function(n){var t=this;return new r(function(i){var r=[];return t.subscribe(function(t){r.push(t);r.length>n&&r.shift()},i.onError.bind(i),function(){i.onNext(r);i.onCompleted()})})};i.select=i.map=function(n,t){var i=this;return new r(function(r){var u=0;return i.subscribe(function(f){var e;try{e=n.call(t,f,u++,i)}catch(o){r.onError(o);return}r.onNext(e)},r.onError.bind(r),r.onCompleted.bind(r))})};i.selectMany=i.flatMap=function(n,t){return t?this.selectMany(function(i){return n(i).select(function(n){return t(i,n)})}):typeof n=="function"?pr.call(this,n):pr.call(this,function(){return n})};i.selectSwitch=i.flatMapLatest=function(n,t){return this.select(n,t).switchLatest()};i.skip=function(n){if(n<0)throw new Error(wi);var t=this;return new r(function(i){var r=n;return t.subscribe(function(n){if(r<=0)i.onNext(n);else r--},i.onError.bind(i),i.onCompleted.bind(i))})};i.skipWhile=function(n,t){var i=this;return new r(function(r){var f=0,u=!1;return i.subscribe(function(e){if(!u)try{u=!n.call(t,e,f++,i)}catch(o){r.onError(o);return}if(u)r.onNext(e)},r.onError.bind(r),r.onCompleted.bind(r))})};i.take=function(n,t){if(n<0)throw new Error(wi);if(n===0)return sr(t);var i=this;return new r(function(t){var r=n;return i.subscribe(function(n){if(r>0){r--;t.onNext(n);r===0&&t.onCompleted()}},t.onError.bind(t),t.onCompleted.bind(t))})};i.takeWhile=function(n,t){var i=this;return new r(function(r){var f=0,u=!0;return i.subscribe(function(e){if(u){try{u=n.call(t,e,f++,i)}catch(o){r.onError(o);return}if(u)r.onNext(e);else r.onCompleted()}},r.onError.bind(r),r.onCompleted.bind(r))})};i.where=i.filter=function(n,t){var i=this;return new r(function(r){var u=0;return i.subscribe(function(f){var e;try{e=n.call(t,f,u++,i)}catch(o){r.onError(o);return}if(e)r.onNext(f)},r.onError.bind(r),r.onCompleted.bind(r))})};i.windowWithTimeOrCount=function(n,t,i){var u=this;return u instanceof p||(i=s),new r(function(r){function a(t){var u=new o;v.setDisposable(u);u.setDisposable(i.scheduleWithRelative(n,function(){if(t===c){h=0;var n=++c;f.onCompleted();f=new ct;r.onNext(hi(f,s));a(n)}}))}var v=new l,y=new e(v),s=new gi(y),h=0,c=0,f=new ct;r.onNext(hi(f,s));return a(0),y.add(u.subscribe(function(n){var i=0,u=!1;f.onNext(n);if(++h===t){u=!0;h=0;i=++c;f.onCompleted();f=new ct;r.onNext(hi(f,s))}u&&a(i)},function(n){f.onError(n);r.onError(n)},function(){f.onCompleted();r.onCompleted()})),s},u)};u.fromCallback=function(n,t,i,r){return t||(t=s),function(){var f=c.call(arguments,0),u=new lt;return t.schedule(function(){function t(n){var t=n;if(r)try{t=r(arguments)}catch(i){u.onError(i);return}else t.length===1&&(t=t[0]);u.onNext(t);u.onCompleted()}f.push(t);n.apply(i,f)}),u.asObservable()}};u.fromNodeCallback=function(n,t,i,r){return t||(t=s),function(){var f=c.call(arguments,0),u=new lt;return t.schedule(function(){function t(n){if(n){u.onError(n);return}var t=c.call(arguments,1);if(r)try{t=r(t)}catch(i){u.onError(i);return}else t.length===1&&(t=t[0]);u.onNext(t);u.onCompleted()}f.push(t);n.apply(i,f)}),u.asObservable()}};u.fromEvent=function(n,t,i){return new r(function(r){return wr(n,t,function(n){var t=n;if(i)try{t=i(arguments)}catch(u){r.onError(u);return}r.onNext(t)})}).publish().refCount()};u.fromEventPattern=function(n,t,i){return new r(function(r){function u(n){var t=n;if(i)try{t=i(arguments)}catch(u){r.onError(u);return}r.onNext(t)}var f=n(u);return a(function(){t&&t(u,f)})}).publish().refCount()};u.fromPromise=function(n){var t=new lt;return n.then(function(n){t.onNext(n);t.onCompleted()},function(n){t.onError(n)}),t.asObservable()};i.multicast=function(n,t){var i=this;return typeof n=="function"?new r(function(r){var u=i.multicast(n());return new e(t(u).subscribe(r),u.connect())}):new br(i,n)};i.publish=function(n){return n?this.multicast(function(){return new ct},n):this.multicast(new ct)};i.publishLast=function(n){return n?this.multicast(function(){return new lt},n):this.multicast(new lt)};i.publishValue=function(n,t){return arguments.length===2?this.multicast(function(){return new ru(t)},n):this.multicast(new ru(n))};i.replay=function(n,t,i,r){return n?this.multicast(function(){return new uu(t,i,r)},n):this.multicast(new uu(t,i,r))};br=function(n){function t(t,i){function u(n){return r.subject.subscribe(n)}var r={subject:i,source:t.asObservable(),hasSubscription:!1,subscription:null};this.connect=function(){return r.hasSubscription||(r.hasSubscription=!0,r.subscription=new e(r.source.subscribe(r.subject),a(function(){r.hasSubscription=!1}))),r.subscription};n.call(this,u)}return v(t,n),t.prototype.connect=function(){return this.connect()},t.prototype.refCount=function(){var t=null,n=0,i=this;return new r(function(r){var u,f;return n++,u=n===1,f=i.subscribe(r),u&&(t=i.connect()),a(function(){f.dispose();n--;n===0&&t.dispose()})})},t}(u);gr=u.interval=function(n,t){return t||(t=s),dr(n,n,t)};nu=u.timer=function(n,i,r){var u;return(r||(r=s),i!==t&&typeof i=="number"?u=i:i!==t&&typeof i=="object"&&(r=i),n instanceof Date&&u===t)?nf(n.getTime(),r):n instanceof Date&&u!==t?(u=i,kr(n.getTime(),u,r)):u===t?tf(n,r):dr(n,u,r)};i.delay=function(n,t){return t||(t=s),n instanceof Date?rf.call(this,n.getTime(),t):tu.call(this,n,t)};i.throttle=function(n,t){t||(t=s);var i=this;return new r(function(r){var s=new l,u=!1,f=0,c,h=null;return c=i.subscribe(function(i){var c,e;u=!0;h=i;f++;c=f;e=new o;s.setDisposable(e);e.setDisposable(t.scheduleWithRelative(n,function(){if(u&&f===c)r.onNext(h);u=!1}))},function(n){s.dispose();r.onError(n);u=!1;f++},function(){if(s.dispose(),u)r.onNext(h);r.onCompleted();u=!1;f++}),new e(c,s)})};i.timeInterval=function(n){var t=this;return n||(n=s),pi(function(){var i=n.now();return t.select(function(t){var r=n.now(),u=r-i;return i=r,{value:t,interval:u}})})};i.timestamp=function(n){return n||(n=s),this.select(function(t){return{value:t,timestamp:n.now()}})};i.sample=function(n,t){return(t||(t=s),typeof n=="number")?iu(this,gr(n,t)):iu(this,n)};i.timeout=function(n,t,i){var u,f=this;return t||(t=ti(new Error("Timeout"))),i||(i=s),u=n instanceof Date?function(n,t){i.scheduleWithAbsolute(n,t)}:function(n,t){i.scheduleWithRelative(n,t)},new r(function(i){var h,r=0,a=new o,c=new l,s=!1,v=new l;return c.setDisposable(a),h=function(){var f=r;v.setDisposable(u(n,function(){s=r===f;var n=s;n&&c.setDisposable(t.subscribe(i))}))},h(),a.setDisposable(f.subscribe(function(n){var t=!s;if(t){r++;i.onNext(n);h()}},function(n){var t=!s;if(t){r++;i.onError(n)}},function(){var n=!s;n&&(r++,i.onCompleted())})),new e(c,v)})};u.generateWithAbsoluteTime=function(n,t,i,u,f,e){return e||(e=s),new r(function(r){var h=!0,s=!1,c,o=n,l;return e.scheduleRecursiveWithAbsolute(e.now(),function(n){if(s)r.onNext(c);try{h?h=!1:o=i(o);s=t(o);s&&(c=u(o),l=f(o))}catch(e){r.onError(e);return}s?n(l):r.onCompleted()})})};u.generateWithRelativeTime=function(n,t,i,u,f,e){return e||(e=s),new r(function(r){var h=!0,s=!1,c,o=n,l;return e.scheduleRecursiveWithRelative(0,function(n){if(s)r.onNext(c);try{h?h=!1:o=i(o);s=t(o);s&&(c=u(o),l=f(o))}catch(e){r.onError(e);return}s?n(l):r.onCompleted()})})};i.delaySubscription=function(n,t){return t||(t=s),this.delayWithSelector(nu(n,t),function(){return sr()})};i.delayWithSelector=function(n,t){var f=this,i,u;return typeof n=="function"?u=n:(i=n,u=t),new r(function(n){var t=new e,c=!1,s=function(){c&&t.length===0&&n.onCompleted()},r=new l,h=function(){r.setDisposable(f.subscribe(function(i){var f,r;try{f=u(i)}catch(e){n.onError(e);return}r=new o;t.add(r);r.setDisposable(f.subscribe(function(){n.onNext(i);t.remove(r);s()},n.onError.bind(n),function(){n.onNext(i);t.remove(r);s()}))},n.onError.bind(n),function(){c=!0;r.dispose();s()}))};return i?r.setDisposable(i.subscribe(function(){h()},n.onError.bind(n),function(){h()})):h(),new e(r,t)})};i.timeoutWithSelector=function(n,t,i){var n,u;return arguments.length===1&&(t=n,n=hr()),i||(i=ti(new Error("Timeout"))),u=this,new r(function(r){var f=new l,c=new l,a=new o,s;f.setDisposable(a);var h=0,y=!1,v=function(n){var e=h,t=function(){return h===e},u=new o;c.setDisposable(u);u.setDisposable(n.subscribe(function(){t()&&f.setDisposable(i.subscribe(r));u.dispose()},function(n){if(t())r.onError(n)},function(){t()&&f.setDisposable(i.subscribe(r))}))};return v(n),s=function(){var n=!y;return n&&h++,n},a.setDisposable(u.subscribe(function(n){if(s()){r.onNext(n);var i;try{i=t(n)}catch(u){r.onError(u);return}v(i)}},function(n){if(s())r.onError(n)},function(){s()&&r.onCompleted()})),new e(f,c)})};i.throttleWithSelector=function(n){var t=this;return new r(function(i){var f,r=!1,s=new l,u=0,h=t.subscribe(function(t){var c,h,e;try{c=n(t)}catch(l){i.onError(l);return}r=!0;f=t;u++;h=u;e=new o;s.setDisposable(e);e.setDisposable(c.subscribe(function(){if(r&&u===h)i.onNext(f);r=!1;e.dispose()},i.onError.bind(i),function(){if(r&&u===h)i.onNext(f);r=!1;e.dispose()}))},function(n){s.dispose();i.onError(n);r=!1;u++},function(){if(s.dispose(),r)i.onNext(f);i.onCompleted();r=!1;u++});return new e(h,s)})};i.skipLastWithTime=function(n,t){t||(t=s);var i=this;return new r(function(r){var u=[];return i.subscribe(function(i){var f=t.now();for(u.push({interval:f,value:i});u.length>0&&f-u[0].interval>=n;)r.onNext(u.shift().value)},r.onError.bind(r),function(){for(var i=t.now();u.length>0&&i-u[0].interval>=n;)r.onNext(u.shift().value);r.onCompleted()})})};i.takeLastWithTime=function(n,t,i){return this.takeLastBufferWithTime(n,t).selectMany(function(n){return ni(n,i)})};i.takeLastBufferWithTime=function(n,t){var i=this;return t||(t=s),new r(function(r){var u=[];return i.subscribe(function(i){var r=t.now();for(u.push({interval:r,value:i});u.length>0&&r-u[0].interval>=n;)u.shift()},r.onError.bind(r),function(){for(var e=t.now(),f=[],i;u.length>0;)i=u.shift(),e-i.interval<=n&&f.push(i.value);r.onNext(f);r.onCompleted()})})};i.takeWithTime=function(n,t){var i=this;return t||(t=s),new r(function(r){var u=t.scheduleWithRelative(n,function(){r.onCompleted()});return new e(u,i.subscribe(r))})};i.skipWithTime=function(n,t){var i=this;return t||(t=s),new r(function(r){var u=!1,f=t.scheduleWithRelative(n,function(){u=!0}),o=i.subscribe(function(n){if(u)r.onNext(n)},r.onError.bind(r),r.onCompleted.bind(r));return new e(f,o)})};i.skipUntilWithTime=function(n,t){t||(t=s);var i=this;return new r(function(r){var u=!1,f=t.scheduleWithAbsolute(n,function(){u=!0}),o=i.subscribe(function(n){if(u)r.onNext(n)},r.onError.bind(r),r.onCompleted.bind(r));return new e(f,o)})};i.takeUntilWithTime=function(n,t){t||(t=s);var i=this;return new r(function(r){return new e(t.scheduleWithAbsolute(n,function(){r.onCompleted()}),i.subscribe(r))})};var r=f.Internals.AnonymousObservable=function(n){function i(n){return typeof n=="undefined"?n=y:typeof n=="function"&&(n=a(n)),n}function t(r){function u(n){var t=new uf(n);if(g.scheduleRequired())g.schedule(function(){try{t.setDisposable(i(r(t)))}catch(n){if(!t.fail(n))throw n;}});else try{t.setDisposable(i(r(t)))}catch(u){if(!t.fail(u))throw u;}return t}if(!(this instanceof t))return new t(r);n.call(this,u)}return v(t,n),t}(u),uf=function(n){function i(t){n.call(this);this.observer=t;this.m=new o}v(i,n);var t=i.prototype;return t.next=function(n){var t=!1;try{this.observer.onNext(n);t=!0}catch(i){throw i;}finally{t||this.dispose()}},t.error=function(n){try{this.observer.onError(n)}catch(t){throw t;}finally{this.dispose()}},t.completed=function(){try{this.observer.onCompleted()}catch(n){throw n;}finally{this.dispose()}},t.setDisposable=function(n){this.m.setDisposable(n)},t.getDisposable=function(){return this.m.getDisposable()},t.disposable=function(n){return arguments.length?this.getDisposable():setDisposable(n)},t.dispose=function(){n.prototype.dispose.call(this);this.m.dispose()},i}(vi),ii=function(n,t){this.subject=n;this.observer=t};ii.prototype.dispose=function(){if(!this.subject.isDisposed&&this.observer!==null){var n=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(n,1);this.observer=null}};var ct=f.Subject=function(n){function i(n){if(h.call(this),!this.isStopped)return this.observers.push(n),new ii(this,n);if(this.exception){n.onError(this.exception);return y}return n.onCompleted(),y}function t(){n.call(this,i);this.isDisposed=!1;this.isStopped=!1;this.observers=[]}return v(t,n),ot(t.prototype,w,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){var t,n,i;if(h.call(this),!this.isStopped){for(t=this.observers.slice(0),this.isStopped=!0,n=0,i=t.length;n<i;n++)t[n].onCompleted();this.observers=[]}},onError:function(n){var i,t,r;if(h.call(this),!this.isStopped){for(i=this.observers.slice(0),this.isStopped=!0,this.exception=n,t=0,r=i.length;t<r;t++)i[t].onError(n);this.observers=[]}},onNext:function(n){var i,t,r;if(h.call(this),!this.isStopped)for(i=this.observers.slice(0),t=0,r=i.length;t<r;t++)i[t].onNext(n)},dispose:function(){this.isDisposed=!0;this.observers=null}}),t.create=function(n,t){return new ff(n,t)},t}(u),lt=f.AsyncSubject=function(n){function i(n){if(h.call(this),!this.isStopped)return this.observers.push(n),new ii(this,n);var t=this.exception,i=this.hasValue,r=this.value;if(t)n.onError(t);else if(i){n.onNext(r);n.onCompleted()}else n.onCompleted();return y}function t(){n.call(this,i);this.isDisposed=!1;this.isStopped=!1;this.value=null;this.hasValue=!1;this.observers=[];this.exception=null}return v(t,n),ot(t.prototype,w,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){var r,n,i,t,u,f;if(h.call(this),!this.isStopped){if(t=this.observers.slice(0),this.isStopped=!0,u=this.value,f=this.hasValue,f)for(n=0,i=t.length;n<i;n++){r=t[n];r.onNext(u);r.onCompleted()}else for(n=0,i=t.length;n<i;n++)t[n].onCompleted();this.observers=[]}},onError:function(n){var i,t,r;if(h.call(this),!this.isStopped){for(i=this.observers.slice(0),this.isStopped=!0,this.exception=n,t=0,r=i.length;t<r;t++)i[t].onError(n);this.observers=[]}},onNext:function(n){h.call(this);this.isStopped||(this.value=n,this.hasValue=!0)},dispose:function(){this.isDisposed=!0;this.observers=null;this.exception=null;this.value=null}}),t}(u),ff=function(n){function i(n){return this.observable.subscribe(n)}function t(t,r){n.call(this,i);this.observer=t;this.observable=r}return v(t,n),ot(t.prototype,w,{onCompleted:function(){this.observer.onCompleted()},onError:function(n){this.observer.onError(n)},onNext:function(n){this.observer.onNext(n)}}),t}(u),ru=f.BehaviorSubject=function(n){function i(n){if(h.call(this),!this.isStopped){this.observers.push(n);n.onNext(this.value);return new ii(this,n)}var t=this.exception;if(t)n.onError(t);else n.onCompleted();return y}function t(t){n.call(this,i);this.value=t;this.observers=[];this.isDisposed=!1;this.isStopped=!1;this.exception=null}return v(t,n),ot(t.prototype,w,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){var t,n,i;if(h.call(this),!this.isStopped){for(t=this.observers.slice(0),this.isStopped=!0,n=0,i=t.length;n<i;n++)t[n].onCompleted();this.observers=[]}},onError:function(n){var i,t,r;if(h.call(this),!this.isStopped){for(i=this.observers.slice(0),this.isStopped=!0,this.exception=n,t=0,r=i.length;t<r;t++)i[t].onError(n);this.observers=[]}},onNext:function(n){var i,t,r;if(h.call(this),!this.isStopped)for(this.value=n,i=this.observers.slice(0),t=0,r=i.length;t<r;t++)i[t].onNext(n)},dispose:function(){this.isDisposed=!0;this.observers=null;this.value=null;this.exception=null}}),t}(u),uu=f.ReplaySubject=function(n){function i(n,t){this.subject=n;this.observer=t}function r(n){var t=new bu(this.scheduler,n),e=new i(this,t),r,u,f;for(h.call(this),this._trim(this.scheduler.now()),this.observers.push(t),r=this.q.length,u=0,f=this.q.length;u<f;u++)t.onNext(this.q[u].value);if(this.hasError){r++;t.onError(this.error)}else this.isStopped&&(r++,t.onCompleted());return t.ensureActive(r),e}function t(t,i,u){this.bufferSize=t==null?Number.MAX_VALUE:t;this.windowSize=i==null?Number.MAX_VALUE:i;this.scheduler=u||g;this.q=[];this.observers=[];this.isStopped=!1;this.isDisposed=!1;this.hasError=!1;this.error=null;n.call(this,r)}return i.prototype.dispose=function(){if(this.observer.dispose(),!this.subject.isDisposed){var n=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(n,1)}},v(t,n),ot(t.prototype,w,{hasObservers:function(){return this.observers.length>0},_trim:function(n){while(this.q.length>this.bufferSize)this.q.shift();while(this.q.length>0&&n-this.q[0].interval>this.windowSize)this.q.shift()},onNext:function(n){var i,r,u,t,f;if(h.call(this),!this.isStopped)for(r=this.scheduler.now(),this.q.push({interval:r,value:n}),this._trim(r),u=this.observers.slice(0),t=0,f=u.length;t<f;t++){i=u[t];i.onNext(n);i.ensureActive()}},onError:function(n){var i,u,r,t,f;if(h.call(this),!this.isStopped){for(this.isStopped=!0,this.error=n,this.hasError=!0,u=this.scheduler.now(),this._trim(u),r=this.observers.slice(0),t=0,f=r.length;t<f;t++){i=r[t];i.onError(n);i.ensureActive()}this.observers=[]}},onCompleted:function(){var t,r,i,n,u;if(h.call(this),!this.isStopped){for(this.isStopped=!0,r=this.scheduler.now(),this._trim(r),i=this.observers.slice(0),n=0,u=i.length;n<u;n++)t=i[n],t.onCompleted(),t.ensureActive();this.observers=[]}},dispose:function(){this.isDisposed=!0;this.observers=null}}),t}(u);if(typeof define=="function"&&typeof define.amd=="object"&&define.amd)return n.Rx=f,define(function(){return f});at?typeof module=="object"&&module&&module.exports==at?module.exports=f:at=f:n.Rx=f})(this);
//# sourceMappingURL=rx.lite.min.js.map
